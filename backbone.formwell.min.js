/*!
Backbone Formwell 1.0.0
https://github.com/marioizquierdo/backbone-formwell
*/
(function(){Backbone.Formwell=(function(){function a(b){this.model=b.model;this.view=b.view}a.prototype.set=function(d,f){var h,c,e,g,b;if(!d){throw"formwell.set error: Can not set in an undefined field"}else{if(_.isElement(d)||_.isElement(d[0])){h=$(d);c={};c[h.attr("name")]=this.getInputValue(h)}else{if(_.isString(d)){c={};c[d]=f}else{if(_.isObject(d)){c=d}}}}this.model.set(c);g=this.model.validateModel();b=[];for(d in c){f=c[d];if(g&&(e=g[d])){b.push(this.showErrorFor(d,e))}else{b.push(this.hideErrorFor(d))}}return b};a.prototype.validate=function(){var b,c,d;d=this.model.validateModel();this.hideAllErrors();if(d){for(b in d){c=d[b];this.showErrorFor(b,c)}}return d};a.prototype.getInputValue=function(b){b=$(b);if(b.is("[type=checkbox]")){return b.prop("checked")}else{return b.val()}};a.prototype.showErrorFor=function(c,d){var b,e;e=this.findInputFor(c);b=this.findOrCreateError(c,e);b.text(d).show();e.addClass("with-error-message");return b.parents(".form-row").addClass("with-error-message")};a.prototype.hideErrorFor=function(c){var b,d;d=this.findInputFor(c);b=this.findOrCreateError(c,d);d.removeClass("with-error-message");b.parents(".form-row").removeClass("with-error-message");return b.hide()};a.prototype.hideAllErrors=function(){var b,c;c=this.findAllInputs();b=this.findAllErrors();c.removeClass("with-error-message");b.parents(".form-row").removeClass("with-error-message");return b.hide()};a.prototype.findInputFor=function(b){return this.view.$("[name='"+b+"']")};a.prototype.findAllInputs=function(){return this.view.$("[name]")};a.prototype.findOrCreateError=function(c,d){var b;b=this.view.$(".error-message[data-name='"+c+"']");if(b.length===0){b=$("<span class='error-message' data-name='"+c+"'>error</span>");d.after(b)}return b};a.prototype.findAllErrors=function(){return this.view.$(".error-message[data-name]")};return a})()}).call(this);